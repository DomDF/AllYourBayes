{
  "hash": "99fd1d1d83f62b84c2bce654c669d5dd",
  "result": {
    "markdown": "---\ntitle: Decisions under Uncertainty. Part 1\nsubtitle: Connecting Modelling and Actions\nauthor: Domenic Di Francesco\ndate: '2024-02-01'\ncategories:\n  - Decision Analysis\n  - Uncertainty\n  - Julia\n  - Optimisation\nfields:\n  - date\n  - title\n  - reading-time\n  - description\ncitation: true\nimage: young_ada.png\nfrom: markdown+emoji\n---\n\n### TLDR\n\nFor many of you reading this, developing and testing predictive models is a lot of fun - but my pragmatic, buzz-killing message here, is that we shouldn't forget why we ever asked to do it. I suggest that the reason is (almost?) always, to help support decision-making. And yet, we often have this unhelpful disconnect between a calculation, and what the results imply for how we should act. An analyst hands over their work to a manager or budget holder, who then reinterprets everything and makes a call, which may or may not be consistent with the information they have been provided - sound familiar? It does to me.\n\nIn this post (Part 1) these two domains are considered jointly, using an example. We see how this can allow for practioners to arrive at coherent and reproducible (auditable) decisions. Part 2 will consider a specific application of this approach, known as value of information analysis.\n\n---\n\n### A Familiar Scenario\n\nWhen I worked as an engineer I would often be asked to perform calculations (using spreadsheets :upside_down_face: ) to arrive at some number regarding a safe operating condition for a damaged structure.\n\nModels for the sake of themselves can be plenty of fun, but unless they are tied to the underlying decsions that they are supposed to inform, they are not necessarily fulfilling their purpose. \n\n![So You've Fit a Predictive Model?](https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExZngxNnN0YzE5eWdmNDJua3JwYmN3dGJza2Y5d3l5eXo3YTFyZTlvbiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/miFGO0mIRDhf2/giphy.gif)\n\n\n```{mermaid}\n%%| fig-cap: \"Example  Influence Diagram with Decisions (square nodes), Uncertain Outcomes (circles) and Utility (diamonds).\"\n\n\nflowchart LR\n  d1[Decision] --> o1((Uncertain \\noutcome))\n  d1 --> c1{Utility}\n  o1 --> c1\n\n```\n\n\n### Analysis > Vibes!\n\nThese (decision/influence/whatever!) diagrams provide a clear map of what factors we think we need to consider when making a decision. They also provide causal information, showing how intervening at one point can have downstream effects. They may seem trivial, but once you try and draw one for a problem you are working on, you will see they encourage you to think deeply about your area of expertise - no seriously, please try it!\n\nTheir apparent simplicity also has the benefit of being able to communicate qualitative information with various stakeholders. An experienced engineer could map out complex relationships between variables so that a statistical model could be developed that was consistent with this information. This could then be used to inform decisions.\n\nBut, is any of this ever required? If the goal is to arrive at a decision that aligns with subject matter knowledge, then can't we just ask the expert to jump right to the decision? \n\nThis will not always be a valid shortcut. If you have attended workshops that were organised to get a room of experts to agree on a strategy, there will not always be a clear agreement. This is not necessarily because of a lack of expertise, but because of a lack of a common language to communicate the information. Formalising the structure of the problem, the prior knowledge, and where data should be used to update parameters results in a quantitive, reproducible and (with a little extra work) explanaible decision-making process.\n\n\n\n### Buying a car\n\nI do not know much about cars, despite being mistake for a mechanic based on my interest in engineering. In fact, when buying my first car, I noticed that a button on the key was not unlocking the door and so suggested to the garage that they may need to reduce the price. A confused salesman showed me the other side of the key, where a small light was flashing, \"it's a torch, mate. For when you need to unlock your car in the dark.\" I lost all bargaining power.\n\nI was reluctant to overpay, and could perhaps have looked at some data to help inform me. Here is an [example dataset on car prices from Kaggle](https://www.kaggle.com/datasets/jacksondivakarr/sample34). We're using my new favourite language for scientific computing, `Julia`, today. FYI, it's a dream. I'll perhaps write about why I love it another time, but [here is the homepage](https://julialang.org).\n\nLet's start by loading the libraries that we'll need.\n\n::: {.cell execution_count=1}\n``` {.julia .cell-code}\n# For reading and handling the data\nusing CSV, DataFrames, DataFramesMeta\n\n# For working with probabilistic models\nusing Distributions, Random, Stan\n```\n:::\n\n\nA simple example - perhaps you will develop some intuition for the problem as you read it, but hopefully I have convinced you that it will sometimes be worthwhile to draw it out and do the maths. Think of the early decision-theorist Howard Raiffa famously drew a decision tree to help him decide which academic position to take up, as he documented in this paper.\n\n::: {.cell execution_count=2}\n``` {.julia .cell-code}\nMersenneTwister(231123) |>\n  prng -> rand(prng, Normal(0, 1), 10)\n```\n\n::: {.cell-output .cell-output-display execution_count=39}\n```\n10-element Vector{Float64}:\n -0.4797047482429591\n  0.3492046160452603\n  1.9035942889710349\n -1.0599399228488406\n -0.05026230935484321\n  1.6159635845804887\n  0.46192798081799236\n  0.38816396593759556\n -1.4500821161955104\n -0.3667444519178413\n```\n:::\n:::\n\n\n### Reproducibility\n\n![Might your decisions impact the safety of the public?](https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExajFkdTI0dnN6amt1cmZ5Y3UwaHFneG5xb3cybXVwZXcxYjN3bDdvbCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/W1tZZhie5U7RYqjg7Z/giphy.gif)\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {}
  }
}